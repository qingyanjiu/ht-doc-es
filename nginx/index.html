<html>
  <head>
    <meta charset="UTF-8" />
    <title>图扑文档搜索</title>
    <!-- Font Awesome -->
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css"
      rel="stylesheet"
    />
    <!-- Google Fonts -->
    <link
      href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap"
      rel="stylesheet"
    />
    <!-- MDB -->
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/3.6.0/mdb.min.css"
      rel="stylesheet"
    />
  </head>
  <body>
    <div class="input-group" style="justify-content: center; top: 20px">
      <div class="form-outline">
        <input
          type="search"
          id="form1"
          class="form-control"
          style="width: 600px"
        />
        <label class="form-label" for="form1">输入查询关键字</label>
      </div>
      <button type="button" class="btn btn-primary" id="searchBtn">
        <i class="fas fa-search"></i>
      </button>
    </div>

    <div id="loading" style="height:100%;width:100%;position: absolute;top: -20px;display: none;background: #000; opacity: 0.4; z-index: 9">
      <div class="spinner-border" style="left: 50%;position: relative;top: 200px;"></div>
    </div>

    <div role="status" style="position: relative; top: 40px">
      <div id="resultContent"></div>
    </div>

    <!-- MDB -->
    <script
      type="text/javascript"
      src="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/3.6.0/mdb.min.js"
    ></script>
    <script src="http://libs.baidu.com/jquery/2.0.0/jquery.min.js"></script>
    <script type="text/javascript">
      $(function () {
        $("#searchBtn").click(() => {
          const value = $("#form1").val();
          qryHtDoc(value);
        });
      });

      function qryHtDoc(word) {
      $("#loading").show();
        $.ajax({
          url: "http://139.198.26.182:30000/api/ht-doc/qryHtDocByMessage",
          data: { searchWord: word },
          success: function (resp) {
          $("#loading").hide();
            if (resp && resp.length > 0) {
              $("#resultContent").html("");
              let html = '<ul class="list-group">';
              resp.forEach((r) => {
                html += "<li";
                html += ' data-mdb-toggle="tooltip"';
                html += ' data-mdb-placement="top"';
                html += ' title="' + r.path + '"';
                html += ' class="list-group-item" style="line-height: 40px; padding: 0 10%">';
                html += '<a target="_blank" select="' + r.path + '" href="';
                html += r.path + '">';
                html += r.message;
                html += "</a></li>";
              });
              html += "</ul>";
              $("#resultContent").append(html);
            }
          },
          error: function (e) {
            $("#loading").hide();
            console.error(e);
          },
        });
      }
    </script>
  </body>
</html>
